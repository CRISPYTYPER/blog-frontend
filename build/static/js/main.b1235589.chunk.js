(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{119:function(e,n){},122:function(e,n,t){"use strict";t.r(n);var r,a,c,o,i,s,u,b,l,j,d,O,p=t(35),g=t.n(p),f=(t(79),t(16)),h=t(11),m=t(4),x=t(5),v=t(3),y=t(62),w=t(0),E=["children"],k=x.b.div(r||(r=Object(m.a)(["\n    padding-left: 1rem;\n    padding-right: 1rem;\n    width: 1024px;\n    margin: 0 auto; /* \uc911\uc559 \uc815\ub82c */\n\n    /* \ube0c\ub77c\uc6b0\uc800 \ud06c\uae30\uc5d0 \ub530\ub77c \uac00\ub85c \ud06c\uae30 \ubcc0\uacbd */\n    @media (max-width: 1024px) {\n        width: 768px;\n    }\n    @media (max-width: 768px) {\n        width: 100%;\n    }\n"]))),S=function(e){var n=e.children,t=Object(y.a)(e,E);return Object(w.jsx)(k,Object(v.a)(Object(v.a)({},t),{},{children:n}))},C=t(13),T={gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"]},I=Object(x.a)(a||(a=Object(m.a)(["\n    border: none;\n    border-radius: 4px;\n    font-size: 1rem;\n    font-weight: bold;\n    padding: 0.25rem 1rem;\n    color: white;\n    outline: none;\n    cursor: pointer;\n\n    background: ",";\n    &:hover {\n        background: ",";\n    }\n\n    ","\n\n    ","\n\n    &:disabled {\n        background: ",";\n        color: ",";\n        cursor: not-allowed;\n    }\n"])),T.gray[8],T.gray[6],(function(e){return e.fullWidth&&Object(x.a)(c||(c=Object(m.a)(["\n            padding-top: 0.75rem;\n            padding-bottom: 0.75rem;\n            width: 100%;\n            font-size: 1.125rem;\n        "])))}),(function(e){return e.cyan&&Object(x.a)(o||(o=Object(m.a)(["\n            background: ",";\n            &:hover {\n                background: ",";\n            }\n        "])),T.cyan[5],T.cyan[4])}),T.gray[3],T.gray[5]),R=x.b.button(i||(i=Object(m.a)(["\n    ","\n"])),I),_=Object(x.b)(C.b)(s||(s=Object(m.a)(["\n    ","\n"])),I),P=function(e){return e.to?Object(w.jsx)(_,Object(v.a)(Object(v.a)({},e),{},{cyan:e.cyan?1:0})):Object(w.jsx)(R,Object(v.a)({},e))},L=x.b.div(u||(u=Object(m.a)(["\n    position: fixed;\n    width: 100%;\n    background: white;\n    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.08);\n"]))),A=Object(x.b)(S)(b||(b=Object(m.a)(["\n    height: 4rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between; /* \uc790\uc2dd \uc5d8\ub9ac\uba3c\ud2b8 \uc0ac\uc774\uc758 \uc5ec\ubc31\uc744 \ucd5c\ub300\ub85c \uc124\uc815 */\n    .logo {\n        font-size: 1.125rem;\n        font-weight: 800;\n        letter-spacing: 2px;\n    }\n    .right {\n        display: flex;\n        align-items: center;\n    }\n"]))),D=x.b.div(l||(l=Object(m.a)(["\n    height: 4rem;\n"]))),N=x.b.div(j||(j=Object(m.a)(["\n    font-weight: 800;\n    margin-right: 1rem;\n"]))),z=function(e){var n=e.user,t=e.onLogout;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L,{children:Object(w.jsxs)(A,{children:[Object(w.jsx)(C.b,{to:"/",className:"logo",children:"REACTERS"}),n?Object(w.jsxs)("div",{className:"right",children:[Object(w.jsx)(N,{children:n.username}),Object(w.jsx)(P,{onClick:t,children:"\ub85c\uadf8\uc544\uc6c3"})]}):Object(w.jsx)("div",{className:"right",children:Object(w.jsx)(P,{to:"/login",children:"\ub85c\uadf8\uc778"})})]})}),Object(w.jsx)(D,{})]})},F=t(8),M=t(14),B=t(12),G=t.n(B),U=t(124),H=t(123),W=t(15),J=t(66),q=t.n(J).a.create(),Q=function(){return q.post("/api/auth/logout")},Z="loading/START_LOADING",K="loading/FINISH_LOADING",$=Object(U.a)(Z,(function(e){return e})),V=Object(U.a)(K,(function(e){return e})),X=Object(H.a)((d={},Object(F.a)(d,Z,(function(e,n){return Object(v.a)(Object(v.a)({},e),{},Object(F.a)({},n.payload,!0))})),Object(F.a)(d,K,(function(e,n){return Object(v.a)(Object(v.a)({},e),{},Object(F.a)({},n.payload,!1))})),d),{}),Y=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function ee(e,n){var t="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return G.a.mark((function a(c){var o;return G.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(W.c)($(e));case 2:return a.prev=2,a.next=5,Object(W.b)(n,c.payload);case 5:return o=a.sent,a.next=8,Object(W.c)({type:t,payload:o.data,meta:o});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(W.c)({type:r,payload:a.t0,error:!0});case 14:return a.next=16,Object(W.c)(V(e));case 16:case"end":return a.stop()}}),a,null,[[2,10]])}))}var ne=G.a.mark(pe),te=G.a.mark(ge),re="user/TEMP_SET_USER",ae=Y("user/CHECK"),ce=Object(M.a)(ae,3),oe=ce[0],ie=ce[1],se=ce[2],ue="user/LOGOUT",be=Object(U.a)(re,(function(e){return e})),le=Object(U.a)(oe),je=Object(U.a)(ue),de=ee(oe,(function(){return q.get("/api/auth/check")}));function Oe(){try{localStorage.removeItem("user")}catch(e){console.log("localStorage is not working")}}function pe(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(W.b)(Q);case 3:localStorage.removeItem("user"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),ne,null,[[0,6]])}function ge(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(oe,de);case 2:return e.next=4,Object(W.d)(se,Oe);case 4:return e.next=6,Object(W.d)(ue,pe);case 6:case"end":return e.stop()}}),te)}var fe,he,me,xe,ve,ye,we,Ee=Object(H.a)((O={},Object(F.a)(O,re,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{user:t})})),Object(F.a)(O,ie,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{user:t,checkError:null})})),Object(F.a)(O,se,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{user:null,checkError:t})})),Object(F.a)(O,ue,(function(e){return Object(v.a)(Object(v.a)({},e),{},{user:null})})),O),{user:null,checkError:null}),ke=function(){var e=Object(h.c)((function(e){return{user:e.user.user}})).user,n=Object(h.b)();return Object(w.jsx)(z,{user:e,onLogout:function(){n(je())}})},Se=t(1),Ce=t.n(Se),Te=t(23),Ie=t.n(Te),Re=x.b.div(fe||(fe=Object(m.a)(["\n    ","\n    color: ",";\n\n    /* span \uc0ac\uc774\uc5d0 \uac00\uc6b4\ub383\uc810 \ubb38\uc790 \ubcf4\uc5ec \uc8fc\uae30 */\n    span + span:before {\n        color: ",";\n        padding-left: 0.25rem;\n        padding-right: 0.25rem;\n        content: '\\B7'; /* \uac00\uc6b4\ub383 \uc810 \ubb38\uc790 */\n    }\n"],["\n    ","\n    color: ",";\n\n    /* span \uc0ac\uc774\uc5d0 \uac00\uc6b4\ub383\uc810 \ubb38\uc790 \ubcf4\uc5ec \uc8fc\uae30 */\n    span + span:before {\n        color: ",";\n        padding-left: 0.25rem;\n        padding-right: 0.25rem;\n        content: '\\\\B7'; /* \uac00\uc6b4\ub383 \uc810 \ubb38\uc790 */\n    }\n"])),(function(e){return e.hasMarginTop&&Object(x.a)(he||(he=Object(m.a)(["\n            margin-top: 1rem;\n        "])))}),T.gray[6],T.gray[4]),_e=function(e){var n=e.username,t=e.publishedDate,r=e.hasMarginTop;return Object(w.jsxs)(Re,{hasMarginTop:r,children:[Object(w.jsx)("span",{children:Object(w.jsx)("b",{children:Object(w.jsx)(C.b,{to:"/@".concat(n),children:n})})}),Object(w.jsx)("span",{children:new Date(t).toLocaleDateString()})]})},Pe=x.b.div(me||(me=Object(m.a)(["\n    margin-top: 0.5rem;\n    .tag {\n        display: inline-block;\n        color: ",";\n        text-decoration: none;\n        margin-right: 0.5rem;\n        &:hover {\n            color: ",";\n        }\n    }\n"])),T.cyan[7],T.cyan[6]),Le=function(e){var n=e.tags;return Object(w.jsx)(Pe,{children:n.map((function(e){return Object(w.jsxs)(C.b,{className:"tag",to:"/?tag=".concat(e),children:["#",e]},e)}))})},Ae=Object(x.b)(S)(xe||(xe=Object(m.a)(["\n    margin-top: 3rem;\n"]))),De=x.b.div(ve||(ve=Object(m.a)(["\n    display: flex;\n    justify-content: flex-end; /* \uc624\ub978\ucabd \ub05d\ubd80\ubd84\uc5d0\uc11c flex\ub85c \ubd99\uc784 */\n    margin-bottom: 3rem;\n"]))),Ne=x.b.div(ye||(ye=Object(m.a)(["\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n    /* \ub9e8 \uc704 \ud3ec\uc2a4\ud2b8\ub294 padding-top \uc5c6\uc74c */\n    &:first-child {\n        padding-top: 0;\n    }\n    & + & {\n        border-top: 1px solid ",";\n    }\n\n    h2 {\n        font-size: 2rem;\n        margin-bottom: 0;\n        margin-top: 0;\n        &:hover {\n            color: ",";\n        }\n    }\n    p {\n        margin-top: 2rem;\n    }\n"])),T.gray[2],T.gray[6]),ze=function(e){var n=e.post,t=n.publishedDate,r=n.user,a=n.tags,c=n.title,o=n.body,i=n._id;return Object(w.jsxs)(Ne,{children:[Object(w.jsx)("h2",{children:Object(w.jsx)(C.b,{to:"/@".concat(r.username,"/").concat(i),children:c})}),Object(w.jsx)(_e,{username:r.username,publishedDate:new Date(t)}),Object(w.jsx)(Le,{tags:a}),Object(w.jsx)("p",{children:o})]})},Fe=function(e){var n=e.posts,t=e.loading,r=e.error,a=e.showWriteButton;return r?Object(w.jsx)(Ae,{children:"\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."}):Object(w.jsxs)(Ae,{children:[Object(w.jsx)(De,{children:a&&Object(w.jsx)(P,{cyan:!0,to:"/write",children:"\uc0c8 \uae00 \uc791\uc131\ud558\uae30"})}),!t&&n&&Object(w.jsx)("div",{children:n.map((function(e){return Object(w.jsx)(ze,{post:e},e._id)}))})]})},Me=G.a.mark(Qe),Be=Y("posts/LIST_POSTS"),Ge=Object(M.a)(Be,3),Ue=Ge[0],He=Ge[1],We=Ge[2],Je=Object(U.a)(Ue,(function(e){return{tag:e.tag,username:e.username,page:e.page}})),qe=ee(Ue,(function(e){var n=e.page,t=e.username,r=e.tag,a=Ie.a.stringify({page:n,username:t,tag:r});return q.get("/api/posts?".concat(a))}));function Qe(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(Ue,qe);case 2:case"end":return e.stop()}}),Me)}var Ze,Ke,$e,Ve,Xe,Ye=Object(H.a)((we={},Object(F.a)(we,He,(function(e,n){var t=n.payload,r=n.meta;return Object(v.a)(Object(v.a)({},e),{},{posts:t,lastPage:parseInt(r.headers["last-page"],10)})})),Object(F.a)(we,We,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{error:t})})),we),{posts:null,error:null,lastPage:1}),en=Object(f.e)((function(e){var n=e.location,t=e.match,r=Object(h.b)(),a=Object(h.c)((function(e){var n=e.posts,t=e.loading,r=e.user;return{posts:n.posts,error:n.error,loading:t["posts/LIST_POSTS"],user:r.user}})),c=a.posts,o=a.error,i=a.loading,s=a.user;return Object(Se.useEffect)((function(){var e=t.params.username,a=Ie.a.parse(n.search,{ignoreQueryPrefix:!0}),c=a.tag,o=a.page;r(Je({tag:c,username:e,page:o}))}),[r,n.search,t.params]),Object(w.jsx)(Fe,{loading:i,error:o,posts:c,showWriteButton:s})})),nn=x.b.div(Ze||(Ze=Object(m.a)(["\n    width: 320px;\n    margin: 0 auto;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 3rem;\n"]))),tn=x.b.div(Ke||(Ke=Object(m.a)([""]))),rn=function(e){var n=e.username,t=e.tag,r=e.page,a=Ie.a.stringify({tag:t,page:r});return n?"/@".concat(n,"?").concat(a):"/?".concat(a)},an=function(e){var n=e.page,t=e.lastPage,r=e.username,a=e.tag;return Object(w.jsxs)(nn,{children:[Object(w.jsx)(P,{disabled:1===n,to:1===n?void 0:rn({username:r,tag:a,page:n-1}),children:"\uc774\uc804"}),Object(w.jsx)(tn,{children:n}),Object(w.jsx)(P,{disabled:n===t,to:n===t?void 0:rn({username:r,tag:a,page:n+1}),children:"\ub2e4\uc74c"})]})},cn=Object(f.e)((function(e){var n=e.location,t=e.match,r=Object(h.c)((function(e){var n=e.posts,t=e.loading;return{lastPage:n.lastPage,posts:n.posts,loading:t["posts/LIST_POSTS"]}})),a=r.lastPage,c=r.posts,o=r.loading;if(!c||o)return null;var i=t.params.username,s=Ie.a.parse(n.search,{ignoreQueryPrefix:!0}),u=s.tag,b=s.page,l=void 0===b?1:b;return Object(w.jsx)(an,{tag:u,username:i,page:parseInt(l,10),lastPage:a})})),on=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ke,{}),Object(w.jsx)(en,{}),Object(w.jsx)(cn,{})]})},sn=x.b.div($e||($e=Object(m.a)(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    background: ",";\n    /* flex\ub85c \ub0b4\ubd80 \ub0b4\uc6a9 \uc911\uc559 \uc815\ub82c */\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"])),T.gray[2]),un=x.b.div(Ve||(Ve=Object(m.a)(["\n    .logo-area {\n        display: block;\n        padding-bottom: 2rem;\n        text-align: center;\n        font-weight: bold;\n        letter-spacing: 2px;\n    }\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.025);\n    padding: 2rem;\n    width: 360px;\n    background: white;\n    border-radius: 2px;\n"]))),bn=function(e){var n=e.children;return Object(w.jsx)(sn,{children:Object(w.jsxs)(un,{children:[Object(w.jsx)("div",{className:"logo-area",children:Object(w.jsx)(C.b,{to:"/",children:"REACTERS"})}),n]})})},ln=t(67),jn=G.a.mark(_n),dn="auth/CHANGE_FIELD",On="auth/INITIALIZE_FORM",pn=Y("auth/REGISTER"),gn=Object(M.a)(pn,3),fn=gn[0],hn=gn[1],mn=gn[2],xn=Y("auth/LOGIN"),vn=Object(M.a)(xn,3),yn=vn[0],wn=vn[1],En=vn[2],kn=Object(U.a)(dn,(function(e){return{form:e.form,key:e.key,value:e.value}})),Sn=Object(U.a)(On,(function(e){return e})),Cn=Object(U.a)(fn,(function(e){return{username:e.username,password:e.password}})),Tn=Object(U.a)(yn,(function(e){return{username:e.username,password:e.password}})),In=ee(fn,(function(e){var n=e.username,t=e.password;return q.post("/api/auth/register",{username:n,password:t})})),Rn=ee(yn,(function(e){var n=e.username,t=e.password;return q.post("/api/auth/login",{username:n,password:t})}));function _n(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(fn,In);case 2:return e.next=4,Object(W.d)(yn,Rn);case 4:case"end":return e.stop()}}),jn)}var Pn,Ln,An,Dn,Nn,zn,Fn,Mn,Bn,Gn={register:{username:"",password:"",passwordConfirm:""},login:{username:"",password:""},auth:null,authError:null},Un=Object(H.a)((Xe={},Object(F.a)(Xe,dn,(function(e,n){var t=n.payload,r=t.form,a=t.key,c=t.value;return Object(ln.a)(e,(function(e){e[r][a]=c}))})),Object(F.a)(Xe,On,(function(e,n){var t,r=n.payload;return Object(v.a)(Object(v.a)({},e),{},(t={},Object(F.a)(t,r,Gn[r]),Object(F.a)(t,"authError",null),t))})),Object(F.a)(Xe,hn,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{authError:null,auth:t})})),Object(F.a)(Xe,mn,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{authError:t})})),Object(F.a)(Xe,wn,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{authError:null,auth:t})})),Object(F.a)(Xe,En,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{authError:t})})),Xe),Gn),Hn=x.b.div(Pn||(Pn=Object(m.a)(["\n    h3 {\n        margin: 0;\n        color: ",";\n        margin-bottom: 1rem;\n    }\n"])),T.gray[8]),Wn=x.b.input(Ln||(Ln=Object(m.a)(["\n    font-size: 1rem;\n    border: none;\n    border-bottom: 1px solid ",";\n    padding-bottom: 0.5rem;\n    outline: none;\n    width: 100%;\n    &:focus {\n        color: $oc-teal-7;\n        border-bottom: 1px solid ",";\n    }\n    & + & {\n        margin-top: 1rem;\n    }\n"])),T.gray[5],T.gray[7]),Jn=x.b.div(An||(An=Object(m.a)(["\n    margin-top: 2rem;\n    text-align: right;\n    a {\n        color: ",";\n        text-decoration: underline;\n        &:hover {\n            color: ",";\n        }\n    }\n"])),T.gray[6],T.gray[9]),qn=Object(x.b)(P)(Dn||(Dn=Object(m.a)(["\n    margin-top: 1rem;\n"]))),Qn={login:"\ub85c\uadf8\uc778",register:"\ud68c\uc6d0\uac00\uc785"},Zn=x.b.div(Nn||(Nn=Object(m.a)(["\n    color: red;\n    text-align: center;\n    font-size: 0.875rem;\n    margin-top: 1rem;\n"]))),Kn=function(e){var n=e.type,t=e.form,r=e.onChange,a=e.onSubmit,c=e.error,o=Qn[n];return Object(w.jsxs)(Hn,{children:[Object(w.jsx)("h3",{children:o}),Object(w.jsxs)("form",{onSubmit:a,children:[Object(w.jsx)(Wn,{autoComplete:"username",name:"username",placeholder:"\uc544\uc774\ub514",onChange:r,value:t.username}),Object(w.jsx)(Wn,{autoComplete:"new-password",name:"password",placeholder:"\ube44\ubc00\ubc88\ud638",type:"password",onChange:r,value:t.password}),"register"===n&&Object(w.jsx)(Wn,{autoComplete:"new-password",name:"passwordConfirm",placeholder:"\ube44\ubc00\ubc88\ud638 \ud655\uc778",type:"password",onChange:r,value:t.passwordConfirm}),c&&Object(w.jsx)(Zn,{children:c}),Object(w.jsx)(qn,{cyan:!0,fullWidth:!0,style:{marginTop:"1rem"},children:o})]}),Object(w.jsx)(Jn,{children:"login"===n?Object(w.jsx)(C.b,{to:"/register",children:"\ud68c\uc6d0\uac00\uc785"}):Object(w.jsx)(C.b,{to:"/login",children:"\ub85c\uadf8\uc778"})})]})},$n=Object(f.e)((function(e){var n=e.history,t=Object(Se.useState)(null),r=Object(M.a)(t,2),a=r[0],c=r[1],o=Object(h.b)(),i=Object(h.c)((function(e){var n=e.auth,t=e.user;return{form:n.login,auth:n.auth,authError:n.authError,user:t.user}})),s=i.form,u=i.auth,b=i.authError,l=i.user;return Object(Se.useEffect)((function(){o(Sn("login"))}),[o]),Object(Se.useEffect)((function(){if(b)return console.log("\uc624\ub958 \ubc1c\uc0dd"),console.log(b),void c("\ub85c\uadf8\uc778 \uc2e4\ud328");u&&(console.log("\ub85c\uadf8\uc778 \uc131\uacf5"),o(le()))}),[u,b,o]),Object(Se.useEffect)((function(){if(l){n.push("/");try{localStorage.setItem("user",JSON.stringify(l))}catch(e){console.log("localStorage is not working")}}}),[n,l]),Object(w.jsx)(Kn,{type:"login",form:s,onChange:function(e){var n=e.target,t=n.value,r=n.name;o(kn({form:"login",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=s.username,t=s.password;o(Tn({username:n,password:t}))},error:a})})),Vn=function(){return Object(w.jsx)(bn,{children:Object(w.jsx)($n,{})})},Xn=Object(f.e)((function(e){var n=e.history,t=Object(Se.useState)(null),r=Object(M.a)(t,2),a=r[0],c=r[1],o=Object(h.b)(),i=Object(h.c)((function(e){var n=e.auth,t=e.user;return{form:n.register,auth:n.auth,authError:n.authError,user:t.user}})),s=i.form,u=i.auth,b=i.authError,l=i.user;return Object(Se.useEffect)((function(){o(Sn("register"))}),[o]),Object(Se.useEffect)((function(){if(b)return 409===b.response.status?void c("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uacc4\uc815\uba85\uc785\ub2c8\ub2e4."):void c("\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328");u&&(console.log("\ud68c\uc6d0\uac00\uc785 \uc131\uacf5"),console.log(u),o(le()))}),[u,b,o]),Object(Se.useEffect)((function(){if(l){console.log("check API \uc131\uacf5"),console.log(l),n.push("/");try{localStorage.setItem("user",JSON.stringify(l))}catch(e){console.log("localStorage is not working")}}}),[n,l]),Object(w.jsx)(Kn,{type:"register",form:s,onChange:function(e){var n=e.target,t=n.value,r=n.name;o(kn({form:"register",key:r,value:t}))},onSubmit:function(e){e.preventDefault();var n=s.username,t=s.password,r=s.passwordConfirm;if(![n,t,r].includes(""))return t!==r?(c("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),o(kn({form:"register",key:"password",value:""})),void o(kn({form:"register",key:"passwordConfirm",value:""}))):void o(Cn({username:n,password:t}));c("\ube48 \uce78\uc744 \ubaa8\ub450 \uc785\ub825\ud558\uc138\uc694.")},error:a})})),Yn=function(){return Object(w.jsx)(bn,{children:Object(w.jsx)(Xn,{})})},et=t(68),nt=t.n(et),tt=(t(121),Object(x.b)(S)(zn||(zn=Object(m.a)(["\n    /* \ud398\uc774\uc9c0 \uc704\uc544\ub798 \uc5ec\ubc31 \uc9c0\uc815 */\n    padding-top: 5rem;\n    padding-bottom: 5rem;\n"])))),rt=x.b.input(Fn||(Fn=Object(m.a)(["\n    font-size: 3rem;\n    outline: none;\n    padding-bottom: 0.5rem;\n    border: none;\n    border-bottom: 1px solid ",";\n    margin-bottom: 2rem;\n    width: 100%;\n"])),T.gray[4]),at=x.b.div(Mn||(Mn=Object(m.a)(["\n    /* \ucd5c\uc18c \ud06c\uae30 \uc9c0\uc815 \ubc0f padding \uc81c\uac70 */\n    .ql-editor {\n        padding: 0;\n        min-height: 320px;\n        font-size: 1.125rem;\n        line-height: 1.5;\n    }\n    .ql-editor.ql-blank::before {\n        left: 0px;\n    }\n"]))),ct=function(e){var n=e.title,t=e.body,r=e.onChangeField,a=Object(Se.useRef)(null),c=Object(Se.useRef)(null);Object(Se.useEffect)((function(){c.current=new nt.a(a.current,{theme:"bubble",placeholder:"\ub0b4\uc6a9\uc744 \uc791\uc131\ud558\uc138\uc694...",modules:{toolbar:[[{header:"1"},{header:"2"}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block","link","image"]]}});var e=c.current;e.on("text-change",(function(n,t,a){"user"===a&&r({key:"body",value:e.root.innerHTML})}))}),[r]);var o=Object(Se.useRef)(!1);Object(Se.useEffect)((function(){o.current||(o.current=!0,c.current.root.innerHTML=t)}),[t]);return Object(w.jsxs)(tt,{children:[Object(w.jsx)(rt,{placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",onChange:function(e){r({key:"title",value:e.target.value})},value:n}),Object(w.jsx)(at,{children:Object(w.jsx)("div",{ref:a})})]})},ot=G.a.mark(Ct),it="write/INITIALIZE",st="write/CHANGE_FIELD",ut=Y("write/WRITE_POST"),bt=Object(M.a)(ut,3),lt=bt[0],jt=bt[1],dt=bt[2],Ot="write/SET_ORIGINAL_POST",pt=Y("write/UPDATE_POST"),gt=Object(M.a)(pt,3),ft=gt[0],ht=gt[1],mt=gt[2],xt=Object(U.a)(it),vt=Object(U.a)(st,(function(e){return{key:e.key,value:e.value}})),yt=Object(U.a)(lt,(function(e){return{title:e.title,body:e.body,tags:e.tags}})),wt=Object(U.a)(Ot,(function(e){return e})),Et=Object(U.a)(ft,(function(e){return{id:e.id,title:e.title,body:e.body,tags:e.tags}})),kt=ee(lt,(function(e){var n=e.title,t=e.body,r=e.tags;return q.post("/api/posts",{title:n,body:t,tags:r})})),St=ee(ft,(function(e){var n=e.id,t=e.title,r=e.body,a=e.tags;return q.patch("/api/posts/".concat(n),{title:t,body:r,tags:a})}));function Ct(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(lt,kt);case 2:return e.next=4,Object(W.d)(ft,St);case 4:case"end":return e.stop()}}),ot)}var Tt,It,Rt,_t,Pt,Lt,At,Dt={title:"",body:"",tags:[],post:null,postError:null,originalPostId:null},Nt=Object(H.a)((Bn={},Object(F.a)(Bn,it,(function(e){return Dt})),Object(F.a)(Bn,st,(function(e,n){var t=n.payload,r=t.key,a=t.value;return Object(v.a)(Object(v.a)({},e),{},Object(F.a)({},r,a))})),Object(F.a)(Bn,lt,(function(e){return Object(v.a)(Object(v.a)({},e),{},{post:null,postError:null})})),Object(F.a)(Bn,jt,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{post:t})})),Object(F.a)(Bn,dt,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{postError:t})})),Object(F.a)(Bn,Ot,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{title:t.title,body:t.body,tags:t.tags,originalPostId:t._id})})),Object(F.a)(Bn,ht,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{post:t})})),Object(F.a)(Bn,mt,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{postError:t})})),Bn),Dt),zt=function(){var e=Object(h.b)(),n=Object(h.c)((function(e){var n=e.write;return{title:n.title,body:n.body}})),t=n.title,r=n.body,a=Object(Se.useCallback)((function(n){return e(vt(n))}),[e]);return Object(Se.useEffect)((function(){return function(){e(xt())}}),[e]),Object(w.jsx)(ct,{onChangeField:a,title:t,body:r})},Ft=t(39),Mt=x.b.div(Tt||(Tt=Object(m.a)(["\n    width: 100%;\n    border-top: 1px solid ",";\n    padding-top: 2rem;\n\n    h4 {\n        color: ",";\n        margin-top: 0;\n        margin-bottom: 0.5rem;\n    }\n"])),T.gray[2],T.gray[8]),Bt=x.b.form(It||(It=Object(m.a)(["\n    border-radius: 4px;\n    overflow: hidden;\n    display: flex;\n    width: 256px;\n    border: 1px solid ","; /* \uc2a4\ud0c0\uc77c \ucd08\uae30\ud654 */\n    input,\n    button {\n        outline: none;\n        border: none;\n        font-size: 1rem;\n    }\n\n    input {\n        padding: 0.5rem;\n        flex: 1;\n        min-width: 0;\n    }\n    button {\n        cursor: pointer;\n        padding-right: 1rem;\n        padding-left: 1rem;\n        border: none;\n        background: ",";\n        color: white;\n        font-weight: bold;\n        &:hover {\n            background: ",";\n        }\n    }\n"])),T.gray[9],T.gray[8],T.gray[6]),Gt=x.b.div(Rt||(Rt=Object(m.a)(["\n    margin-right: 0.5rem;\n    color: ",";\n    cursor: pointer;\n    &:hover {\n        opacity: 0.5;\n    }\n"])),T.gray[6]),Ut=x.b.div(_t||(_t=Object(m.a)(["\n    display: flex;\n    opacity: 0.5;\n"]))),Ht=Ce.a.memo((function(e){var n=e.tag,t=e.onRemove;return Object(w.jsxs)(Gt,{onClick:function(){return t(n)},children:["#",n]})})),Wt=Ce.a.memo((function(e){var n=e.tags,t=e.onRemove;return Object(w.jsx)(Ut,{children:n.map((function(e){return Object(w.jsx)(Ht,{tag:e,onRemove:t},e)}))})})),Jt=function(e){var n=e.tags,t=e.onChangeTags,r=Object(Se.useState)(""),a=Object(M.a)(r,2),c=a[0],o=a[1],i=Object(Se.useState)([]),s=Object(M.a)(i,2),u=s[0],b=s[1],l=Object(Se.useCallback)((function(e){if(e&&!u.includes(e)){var n=[].concat(Object(Ft.a)(u),[e]);b(n),t(n)}}),[u,t]),j=Object(Se.useCallback)((function(e){var n=u.filter((function(n){return n!==e}));b(n),t(n)}),[u,t]),d=Object(Se.useCallback)((function(e){o(e.target.value)}),[]),O=Object(Se.useCallback)((function(e){e.preventDefault(),l(c.trim()),o("")}),[c,l]);return Object(Se.useEffect)((function(){b(n)}),[n]),Object(w.jsxs)(Mt,{children:[Object(w.jsx)("h4",{children:"\ud0dc\uadf8"}),Object(w.jsxs)(Bt,{onSubmit:O,children:[Object(w.jsx)("input",{placeholder:"\ud0dc\uadf8\ub97c \uc785\ub825\ud558\uc138\uc694",value:c,onChange:d}),Object(w.jsx)("button",{type:"submit",children:"\ucd94\uac00"})]}),Object(w.jsx)(Wt,{tags:u,onRemove:j})]})},qt=function(){var e=Object(h.b)(),n=Object(h.c)((function(e){return e.write.tags}));return Object(w.jsx)(Jt,{onChangeTags:function(n){e(vt({key:"tags",value:n}))},tags:n})},Qt=x.b.div(Pt||(Pt=Object(m.a)(["\n    margin-top: 1rem;\n    margin-bottom: 3rem;\n    button + button {\n        margin-left: 0.5rem;\n    }\n"]))),Zt=Object(x.b)(P)(Lt||(Lt=Object(m.a)(["\n    height: 2.125rem;\n    & + & {\n        margin-left: 0.5rem;\n    }\n"]))),Kt=function(e){var n=e.onCancel,t=e.onPublish,r=e.isEdit;return Object(w.jsxs)(Qt,{children:[Object(w.jsxs)(Zt,{cyan:!0,onClick:t,children:["\ud3ec\uc2a4\ud2b8 ",r?"\uc218\uc815":"\ub4f1\ub85d"]}),Object(w.jsx)(Zt,{onClick:n,children:"\ucde8\uc18c"})]})},$t=Object(f.e)((function(e){var n=e.history,t=Object(h.b)(),r=Object(h.c)((function(e){var n=e.write;return{title:n.title,body:n.body,tags:n.tags,post:n.post,postError:n.postError,originalPostId:n.originalPostId}})),a=r.title,c=r.body,o=r.tags,i=r.post,s=r.postError,u=r.originalPostId;return Object(Se.useEffect)((function(){if(i){var e=i._id,t=i.user;n.push("/@".concat(t.username,"/").concat(e))}s&&console.log(s)}),[n,i,s]),Object(w.jsx)(Kt,{onPublish:function(){t(u?Et({title:a,body:c,tags:o,id:u}):yt({title:a,body:c,tags:o}))},onCancel:function(){n.goBack()},isEdit:!!u})})),Vt=t(24),Xt=function(){return Object(w.jsxs)(S,{children:[Object(w.jsx)(Vt.a,{children:Object(w.jsx)("title",{children:"\uae00 \uc791\uc131\ud558\uae30 - REACTERS"})}),Object(w.jsx)(zt,{}),Object(w.jsx)(qt,{}),Object(w.jsx)($t,{})]})},Yt=t(70),er=G.a.mark(br),nr=Y("post/READ_POST"),tr=Object(M.a)(nr,3),rr=tr[0],ar=tr[1],cr=tr[2],or="post/UNLOAD_POST",ir=Object(U.a)(rr,(function(e){return e})),sr=Object(U.a)(or),ur=ee(rr,(function(e){return q.get("/api/posts/".concat(e))}));function br(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)(rr,ur);case 2:case"end":return e.stop()}}),er)}var lr,jr,dr,Or,pr,gr,fr,hr,mr={post:null,error:null},xr=Object(H.a)((At={},Object(F.a)(At,ar,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{post:t})})),Object(F.a)(At,cr,(function(e,n){var t=n.payload;return Object(v.a)(Object(v.a)({},e),{},{error:t})})),Object(F.a)(At,or,(function(){return mr})),At),mr),vr=Object(x.b)(S)(lr||(lr=Object(m.a)(["\n    margin-top: 4rem;\n"]))),yr=x.b.div(jr||(jr=Object(m.a)(["\n    border-bottom: 1px solid ",";\n    padding-bottom: 3rem;\n    margin-bottom: 3rem;\n    h1 {\n        font-size: 3rem;\n        line-height: 1.5;\n        margin: 0;\n    }\n"])),T.gray[2]),wr=x.b.div(dr||(dr=Object(m.a)(["\n    font-size: 1.3125rem;\n    color: ",";\n"])),T.gray[8]),Er=function(e){var n=e.post,t=e.error,r=e.loading,a=e.actionButtons;if(t)return t.response&&404===t.response.status?Object(w.jsx)(vr,{children:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud3ec\uc2a4\ud2b8\uc785\ub2c8\ub2e4."}):Object(w.jsx)(vr,{children:"\uc624\ub958 \ubc1c\uc0dd!"});if(r||!n)return null;var c=n.title,o=n.body,i=n.user,s=n.publishedDate,u=n.tags;return Object(w.jsxs)(vr,{children:[Object(w.jsx)(Vt.a,{children:Object(w.jsxs)("title",{children:[c," - REACTERS"]})}),Object(w.jsxs)(yr,{children:[Object(w.jsx)("h1",{children:c}),Object(w.jsx)(_e,{username:i.username,publishedDate:s,hasMarginTop:!0}),Object(w.jsx)(Le,{tags:u})]}),a,Object(w.jsx)(wr,{dangerouslySetInnerHTML:{__html:o}})]})},kr=x.b.div(Or||(Or=Object(m.a)(["\n    position: fixed;\n    z-index: 30;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.25);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]))),Sr=x.b.div(pr||(pr=Object(m.a)(["\n    width: 320px;\n    background: white;\n    padding: 1.5rem;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.125);\n    h2 {\n        margin-top: 0;\n        margin-bottom: 1rem;\n    }\n    p {\n        margin-bottom: 3rem;\n    }\n    .buttons {\n        display: flex;\n        justify-content: flex-end;\n    }\n"]))),Cr=Object(x.b)(P)(gr||(gr=Object(m.a)(["\n    height: 2rem;\n    & + & {\n        margin-left: 0.75rem;\n    }\n"]))),Tr=function(e){var n=e.visible,t=e.title,r=e.description,a=e.confirmText,c=void 0===a?"\ud655\uc778":a,o=e.cancelText,i=void 0===o?"\ucde8\uc18c":o,s=e.onConfirm,u=e.onCancel;return n?Object(w.jsx)(kr,{children:Object(w.jsxs)(Sr,{children:[Object(w.jsx)("h2",{children:t}),Object(w.jsx)("p",{children:r}),Object(w.jsxs)("div",{className:"buttons",children:[Object(w.jsx)(Cr,{onClick:u,children:i}),Object(w.jsx)(Cr,{cyan:!0,onClick:s,children:c})]})]})}):null},Ir=function(e){var n=e.visible,t=e.onConfirm,r=e.onCancel;return Object(w.jsx)(Tr,{visible:n,title:"\ud3ec\uc2a4\ud2b8 \uc0ad\uc81c",description:"\ud3ec\uc2a4\ud2b8\ub97c \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",confirmText:"\uc0ad\uc81c",onConfirm:t,onCancel:r})},Rr=x.b.div(fr||(fr=Object(m.a)(["\n    display: flex;\n    justify-content: flex-end;\n    margin-bottom: 2rem;\n    margin-top: -1.5rem;\n"]))),_r=x.b.button(hr||(hr=Object(m.a)(["\n    padding: 0.25rem 0.5rem;\n    border-radius: 4px;\n    color: ",";\n    font-weight: bold;\n    border: none;\n    outline: none;\n    font-size: 0.875rem;\n    cursor: pointer;\n    &:hover {\n        background: ",";\n        color: ",";\n    }\n    & + & {\n        margin-left: 0.25rem;\n    }\n"])),T.gray[6],T.gray[1],T.cyan[7]),Pr=function(e){var n=e.onEdit,t=e.onRemove,r=Object(Se.useState)(!1),a=Object(M.a)(r,2),c=a[0],o=a[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(Rr,{children:[Object(w.jsx)(_r,{onClick:n,children:"\uc218\uc815"}),Object(w.jsx)(_r,{onClick:function(){o(!0)},children:"\uc0ad\uc81c"})]}),Object(w.jsx)(Ir,{visible:c,onConfirm:function(){o(!1),t()},onCancel:function(){o(!1)}})]})},Lr=Object(f.e)((function(e){var n=e.match,t=e.history,r=n.params.postId,a=Object(h.b)(),c=Object(h.c)((function(e){var n=e.post,t=e.loading,r=e.user;return{post:n.post,error:n.error,loading:t["post/READ_POST"],user:r.user}})),o=c.post,i=c.error,s=c.loading,u=c.user;Object(Se.useEffect)((function(){return a(ir(r)),function(){a(sr())}}),[a,r]);var b=function(){var e=Object(Yt.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=r,q.delete("/api/posts/".concat(n));case 3:t.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}var n}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),l=(u&&u._id)===(o&&o.user._id);return Object(w.jsx)(Er,{post:o,loading:s,error:i,actionButtons:l&&Object(w.jsx)(Pr,{onEdit:function(){a(wt(o)),t.push("/write")},onRemove:b})})})),Ar=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ke,{}),Object(w.jsx)(Lr,{})]})},Dr=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Vt.a,{children:Object(w.jsx)("title",{children:"REACTERS"})}),Object(w.jsx)(f.a,{component:on,path:["/@:username","/"],exact:!0}),Object(w.jsx)(f.a,{component:Vn,path:"/login"}),Object(w.jsx)(f.a,{component:Yn,path:"/register"}),Object(w.jsx)(f.a,{component:Xt,path:"/write"}),Object(w.jsx)(f.a,{component:Ar,path:"/@:username/:postId"})]})},Nr=t(25),zr=t(71),Fr=t(72),Mr=G.a.mark(Br);function Br(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.a)([_n(),ge(),Ct(),br(),Qe()]);case 2:case"end":return e.stop()}}),Mr)}var Gr=Object(Nr.combineReducers)({auth:Un,loading:X,user:Ee,write:Nt,post:xr,posts:Ye}),Ur=Object(Fr.a)(),Hr=Object(Nr.createStore)(Gr,Object(zr.composeWithDevTools)(Object(Nr.applyMiddleware)(Ur)));Ur.run(Br),function(){try{var e=localStorage.getItem("user");if(!e)return;Hr.dispatch(be(JSON.parse(e))),Hr.dispatch(le())}catch(n){console.log("localStorage is not working")}}(),g.a.render(Object(w.jsx)(h.a,{store:Hr,children:Object(w.jsx)(C.a,{children:Object(w.jsx)(Vt.b,{children:Object(w.jsx)(Dr,{})})})}),document.getElementById("root"))},79:function(e,n,t){}},[[122,1,2]]]);
//# sourceMappingURL=main.b1235589.chunk.js.map